<script>
  const eventUTC = new Date(Date.UTC(2025, 7, 23, 2, 0, 0)); // 2:00 PM NZST
  const eventLink = "https://www.roblox.com/events/1412207234460156417";

  const title = document.getElementById("title");
  const subtitle = document.getElementById("subtitle");
  const description = document.getElementById("description");
  const localTime = document.getElementById("localTime");
  const countdown = document.getElementById("countdown");
  const button = document.getElementById("eventButton");

  let currentLang = "en";

  function formatLocalTime(date) {
    return date.toLocaleString(currentLang === "vi" ? "vi-VN" : currentLang + "-US", {
      weekday: "short",
      year: "numeric",
      month: "short",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit",
      timeZoneName: "short"
    });
  }

  function updateCountdown() {
    const now = new Date();
    const diff = eventUTC - now;

    if (diff <= 0) {
      countdown.textContent = translations[currentLang].buttonAfter;
      button.textContent = translations[currentLang].buttonAfter;
      button.onclick = () => window.open(eventLink, "_blank");
    } else {
      const hours = Math.floor(diff / 1000 / 60 / 60);
      const minutes = Math.floor((diff / 1000 / 60) % 60);
      const seconds = Math.floor((diff / 1000) % 60);
      countdown.textContent = `⏳ ${hours}h ${minutes}m ${seconds}s`;
      button.textContent = translations[currentLang].buttonBefore;
      button.onclick = () => alert(translations[currentLang].alert);
    }
  }

  function setLang(lang) {
    currentLang = lang;
    title.textContent = translations[lang].title;
    subtitle.textContent = translations[lang].subtitle;
    description.innerHTML = translations[lang].description;
    localTime.innerHTML = `${translations[lang].timeLabel} <strong>${formatLocalTime(eventUTC)}</strong>`;
    updateCountdown();
  }

  setLang(currentLang);
  setInterval(updateCountdown, 1000);
</script>
